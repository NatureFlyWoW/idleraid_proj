import type { ClassDefinition, AbilityDefinition, TalentTreeDefinition } from '@shared/types';

// ============= HUNTER ABILITIES =============

const hunterAbilities: AbilityDefinition[] = [
  // Ranged attacks
  {
    id: 'auto_shot',
    name: 'Auto Shot',
    description: 'Automatically fires at the target when in range. 2.8 second base attack speed.',
    type: 'instant',
    resourceCost: 0,
    cooldownSeconds: 0,
    castTimeSeconds: 0,
    baseDamage: 0, // Uses weapon damage
    baseHealing: 0,
    apCoefficient: 0,
    spCoefficient: 0,
    isAoE: false,
    isDot: false,
    isHot: false,
    requiresWeapon: 'ranged',
    levelRequired: 1,
  },
  {
    id: 'arcane_shot',
    name: 'Arcane Shot',
    description: 'An instant shot that causes 183 Arcane damage.',
    type: 'instant',
    resourceCost: 150,
    cooldownSeconds: 6,
    castTimeSeconds: 0,
    baseDamage: 183,
    baseHealing: 0,
    apCoefficient: 0.15,
    spCoefficient: 0,
    isAoE: false,
    isDot: false,
    isHot: false,
    requiresWeapon: 'ranged',
    levelRequired: 6,
  },
  {
    id: 'aimed_shot',
    name: 'Aimed Shot',
    description: 'A powerful aimed shot that increases ranged damage by 600 and reduces healing done to target by 50%.',
    type: 'cast',
    resourceCost: 310,
    cooldownSeconds: 6,
    castTimeSeconds: 3.0,
    baseDamage: 600,
    baseHealing: 0,
    apCoefficient: 0.2,
    spCoefficient: 0,
    isAoE: false,
    isDot: false,
    isHot: false,
    requiresWeapon: 'ranged',
    requiresTalent: 'aimed_shot_talent',
    levelRequired: 20,
  },
  {
    id: 'multi_shot',
    name: 'Multi-Shot',
    description: 'Fires several missiles, hitting up to 3 targets for 150 plus ranged weapon damage.',
    type: 'instant',
    resourceCost: 230,
    cooldownSeconds: 10,
    castTimeSeconds: 0,
    baseDamage: 150,
    baseHealing: 0,
    apCoefficient: 0.2,
    spCoefficient: 0,
    isAoE: true,
    maxTargets: 3,
    isDot: false,
    isHot: false,
    requiresWeapon: 'ranged',
    levelRequired: 18,
  },
  {
    id: 'steady_shot',
    name: 'Steady Shot',
    description: 'A steady shot that causes unmodified ranged weapon damage plus 150.',
    type: 'cast',
    resourceCost: 110,
    cooldownSeconds: 0,
    castTimeSeconds: 2.0,
    baseDamage: 150,
    baseHealing: 0,
    apCoefficient: 0.2,
    spCoefficient: 0,
    isAoE: false,
    isDot: false,
    isHot: false,
    requiresWeapon: 'ranged',
    levelRequired: 50,
  },
  // Stings (DOTs)
  {
    id: 'serpent_sting',
    name: 'Serpent Sting',
    description: 'Stings the target, causing 555 Nature damage over 15 seconds.',
    type: 'instant',
    resourceCost: 145,
    cooldownSeconds: 0,
    castTimeSeconds: 0,
    baseDamage: 555,
    baseHealing: 0,
    apCoefficient: 0.1,
    spCoefficient: 0,
    isAoE: false,
    isDot: true,
    isHot: false,
    tickCount: 5,
    tickIntervalSeconds: 3,
    requiresWeapon: 'ranged',
    levelRequired: 4,
  },
  {
    id: 'viper_sting',
    name: 'Viper Sting',
    description: 'Stings the target, draining 8% of the target\'s mana over 8 seconds.',
    type: 'instant',
    resourceCost: 90,
    cooldownSeconds: 15,
    castTimeSeconds: 0,
    baseDamage: 0,
    baseHealing: 0,
    apCoefficient: 0,
    spCoefficient: 0,
    isAoE: false,
    isDot: true,
    isHot: false,
    tickCount: 4,
    tickIntervalSeconds: 2,
    requiresWeapon: 'ranged',
    levelRequired: 36,
  },
  // Pet abilities
  {
    id: 'call_pet',
    name: 'Call Pet',
    description: 'Calls your pet to your side.',
    type: 'cast',
    resourceCost: 0,
    cooldownSeconds: 0,
    castTimeSeconds: 3.0,
    baseDamage: 0,
    baseHealing: 0,
    apCoefficient: 0,
    spCoefficient: 0,
    isAoE: false,
    isDot: false,
    isHot: false,
    levelRequired: 10,
  },
  {
    id: 'mend_pet',
    name: 'Mend Pet',
    description: 'Heals your pet for 1750 over 5 seconds.',
    type: 'channel',
    resourceCost: 150,
    cooldownSeconds: 0,
    castTimeSeconds: 5.0,
    baseDamage: 0,
    baseHealing: 1750,
    apCoefficient: 0,
    spCoefficient: 0,
    isAoE: false,
    isDot: false,
    isHot: true,
    tickCount: 5,
    tickIntervalSeconds: 1,
    levelRequired: 12,
  },
  {
    id: 'kill_command',
    name: 'Kill Command',
    description: 'Give the command to kill, increasing your pet\'s damage done by 60% for 30 seconds.',
    type: 'instant',
    resourceCost: 75,
    cooldownSeconds: 60,
    castTimeSeconds: 0,
    baseDamage: 0,
    baseHealing: 0,
    apCoefficient: 0,
    spCoefficient: 0,
    isAoE: false,
    isDot: false,
    isHot: false,
    requiresTalent: 'kill_command_talent',
    levelRequired: 40,
  },
  // Traps
  {
    id: 'freezing_trap',
    name: 'Freezing Trap',
    description: 'Place a trap that freezes the first enemy that approaches for up to 20 seconds. Only one trap can be active at a time.',
    type: 'instant',
    resourceCost: 100,
    cooldownSeconds: 30,
    castTimeSeconds: 0,
    baseDamage: 0,
    baseHealing: 0,
    apCoefficient: 0,
    spCoefficient: 0,
    isAoE: false,
    isDot: false,
    isHot: false,
    levelRequired: 20,
  },
  {
    id: 'explosive_trap',
    name: 'Explosive Trap',
    description: 'Place a trap that explodes when approached, dealing 273 to 327 Fire damage and burning enemies for 250 damage over 10 seconds.',
    type: 'instant',
    resourceCost: 145,
    cooldownSeconds: 30,
    castTimeSeconds: 0,
    baseDamage: 300,
    baseHealing: 0,
    apCoefficient: 0.1,
    spCoefficient: 0,
    isAoE: true,
    maxTargets: 5,
    isDot: true,
    isHot: false,
    tickCount: 5,
    tickIntervalSeconds: 2,
    levelRequired: 34,
  },
  {
    id: 'immolation_trap',
    name: 'Immolation Trap',
    description: 'Place a trap that burns the first enemy for 690 Fire damage over 15 seconds.',
    type: 'instant',
    resourceCost: 150,
    cooldownSeconds: 30,
    castTimeSeconds: 0,
    baseDamage: 690,
    baseHealing: 0,
    apCoefficient: 0.1,
    spCoefficient: 0,
    isAoE: false,
    isDot: true,
    isHot: false,
    tickCount: 5,
    tickIntervalSeconds: 3,
    levelRequired: 16,
  },
  // Utility
  {
    id: 'hunters_mark',
    name: "Hunter's Mark",
    description: 'Places a mark on the target, increasing ranged attack power against that target by 300.',
    type: 'instant',
    resourceCost: 60,
    cooldownSeconds: 0,
    castTimeSeconds: 0,
    baseDamage: 0,
    baseHealing: 0,
    apCoefficient: 0,
    spCoefficient: 0,
    isAoE: false,
    isDot: false,
    isHot: false,
    levelRequired: 6,
  },
  {
    id: 'feign_death',
    name: 'Feign Death',
    description: 'Feign death to deceive enemies into ignoring you. Lasts up to 6 minutes.',
    type: 'instant',
    resourceCost: 80,
    cooldownSeconds: 30,
    castTimeSeconds: 0,
    baseDamage: 0,
    baseHealing: 0,
    apCoefficient: 0,
    spCoefficient: 0,
    isAoE: false,
    isDot: false,
    isHot: false,
    levelRequired: 30,
  },
  {
    id: 'disengage',
    name: 'Disengage',
    description: 'Attempts to disengage from melee combat and reduces threat.',
    type: 'instant',
    resourceCost: 50,
    cooldownSeconds: 5,
    castTimeSeconds: 0,
    baseDamage: 0,
    baseHealing: 0,
    apCoefficient: 0,
    spCoefficient: 0,
    isAoE: false,
    isDot: false,
    isHot: false,
    levelRequired: 8,
  },
  {
    id: 'aspect_of_the_hawk',
    name: 'Aspect of the Hawk',
    description: 'The hunter takes on the aspect of the hawk, increasing ranged attack power by 120.',
    type: 'instant',
    resourceCost: 0,
    cooldownSeconds: 0,
    castTimeSeconds: 0,
    baseDamage: 0,
    baseHealing: 0,
    apCoefficient: 0,
    spCoefficient: 0,
    isAoE: false,
    isDot: false,
    isHot: false,
    levelRequired: 10,
  },
  // Talent abilities
  {
    id: 'bestial_wrath',
    name: 'Bestial Wrath',
    description: 'Send your pet into a rage, increasing damage by 50% and immunity to crowd control for 18 seconds.',
    type: 'instant',
    resourceCost: 75,
    cooldownSeconds: 120, // 2 minutes
    castTimeSeconds: 0,
    baseDamage: 0,
    baseHealing: 0,
    apCoefficient: 0,
    spCoefficient: 0,
    isAoE: false,
    isDot: false,
    isHot: false,
    requiresTalent: 'bestial_wrath_talent',
    levelRequired: 40,
  },
  {
    id: 'trueshot_aura',
    name: 'Trueshot Aura',
    description: 'Increases the attack power of party members within 45 yards by 100.',
    type: 'instant',
    resourceCost: 0,
    cooldownSeconds: 0,
    castTimeSeconds: 0,
    baseDamage: 0,
    baseHealing: 0,
    apCoefficient: 0,
    spCoefficient: 0,
    isAoE: false,
    isDot: false,
    isHot: false,
    requiresTalent: 'trueshot_aura_talent',
    levelRequired: 40,
  },
  {
    id: 'wyvern_sting',
    name: 'Wyvern Sting',
    description: 'A stinging shot that puts the target to sleep for 12 seconds. Any damage will cancel the effect.',
    type: 'instant',
    resourceCost: 90,
    cooldownSeconds: 120, // 2 minutes
    castTimeSeconds: 0,
    baseDamage: 300,
    baseHealing: 0,
    apCoefficient: 0,
    spCoefficient: 0,
    isAoE: false,
    isDot: true,
    isHot: false,
    tickCount: 1,
    tickIntervalSeconds: 12,
    requiresWeapon: 'ranged',
    requiresTalent: 'wyvern_sting_talent',
    levelRequired: 40,
  },
];

// ============= TALENT TREES =============

const beastMasteryTalentTree: TalentTreeDefinition = {
  id: 'beast_mastery',
  name: 'Beast Mastery',
  description: 'Focuses on improving pet damage and abilities.',
  role: 'dps',
  talents: [
    // Tier 1
    {
      id: 'improved_aspect_of_the_hawk',
      name: 'Improved Aspect of the Hawk',
      description: 'While Aspect of the Hawk is active, attacks have a 2/4/6/8/10% chance to increase ranged attack speed by 30% for 12 seconds.',
      tier: 1,
      column: 2,
      maxRanks: 5,
      requiredPoints: 0,
      type: 'proc',
      effects: [{ type: 'proc', procChance: 2, procTrigger: 'ranged_hit', procEffect: 'attack_speed', valuePerRank: 2 }],
    },
    {
      id: 'endurance_training',
      name: 'Endurance Training',
      description: 'Increases the health of your pet by 2/4/6/8/10%.',
      tier: 1,
      column: 3,
      maxRanks: 5,
      requiredPoints: 0,
      type: 'passive',
      effects: [{ type: 'stat_bonus', stat: 'petHealth', valuePerRank: 2, isPercentage: true }],
    },
    // Tier 2
    {
      id: 'focused_fire',
      name: 'Focused Fire',
      description: 'All damage caused by you is increased by 1/2% while your pet is active and happy. Also increases your pet damage by 10/20% after a Kill Command.',
      tier: 2,
      column: 1,
      maxRanks: 2,
      requiredPoints: 5,
      type: 'passive',
      effects: [{ type: 'stat_bonus', stat: 'damageWithPet', valuePerRank: 1, isPercentage: true }],
    },
    {
      id: 'improved_aspect_of_the_monkey',
      name: 'Improved Aspect of the Monkey',
      description: 'Increases the Dodge bonus of your Aspect of the Monkey by 2/4/6%.',
      tier: 2,
      column: 2,
      maxRanks: 3,
      requiredPoints: 5,
      type: 'passive',
      effects: [{ type: 'ability_modifier', abilityId: 'aspect_of_the_monkey', stat: 'dodge', valuePerRank: 2 }],
    },
    {
      id: 'thick_hide',
      name: 'Thick Hide',
      description: 'Increases the armor rating of your pets by 4/7/10%.',
      tier: 2,
      column: 3,
      maxRanks: 3,
      requiredPoints: 5,
      type: 'passive',
      effects: [{ type: 'stat_bonus', stat: 'petArmor', valuePerRank: 4, isPercentage: true }],
    },
    // Tier 3
    {
      id: 'pathfinding',
      name: 'Pathfinding',
      description: 'Increases the speed bonus of your Aspect of the Cheetah and Aspect of the Pack by 4/8%.',
      tier: 3,
      column: 1,
      maxRanks: 2,
      requiredPoints: 10,
      type: 'passive',
      effects: [{ type: 'stat_bonus', stat: 'aspectSpeed', valuePerRank: 4, isPercentage: true }],
    },
    {
      id: 'bestial_swiftness',
      name: 'Bestial Swiftness',
      description: 'Increases the outdoor movement speed of your pets by 30%.',
      tier: 3,
      column: 2,
      maxRanks: 1,
      requiredPoints: 10,
      type: 'passive',
      effects: [{ type: 'stat_bonus', stat: 'petMovementSpeed', valuePerRank: 30, isPercentage: true }],
    },
    {
      id: 'unleashed_fury',
      name: 'Unleashed Fury',
      description: 'Increases the damage done by your pets by 4/8/12/16/20%.',
      tier: 3,
      column: 3,
      maxRanks: 5,
      requiredPoints: 10,
      type: 'passive',
      effects: [{ type: 'stat_bonus', stat: 'petDamage', valuePerRank: 4, isPercentage: true }],
    },
    // Tier 4
    {
      id: 'kill_command_talent',
      name: 'Kill Command',
      description: 'Give the command to kill, increasing your pet\'s damage by 60% for 30 seconds.',
      tier: 4,
      column: 2,
      maxRanks: 1,
      requiredPoints: 15,
      type: 'active',
      effects: [{ type: 'ability_unlock', abilityId: 'kill_command', valuePerRank: 1 }],
    },
    // Tier 5
    {
      id: 'ferocity',
      name: 'Ferocity',
      description: 'Increases the critical strike chance of your pet by 2/4/6/8/10%.',
      tier: 5,
      column: 2,
      maxRanks: 5,
      requiredPoints: 20,
      type: 'passive',
      effects: [{ type: 'stat_bonus', stat: 'petCritChance', valuePerRank: 2, isPercentage: true }],
    },
    // Tier 6
    {
      id: 'frenzy',
      name: 'Frenzy',
      description: 'Gives your pet a 20/40/60/80/100% chance to gain 30% attack speed for 8 seconds after dealing a critical strike.',
      tier: 6,
      column: 2,
      maxRanks: 5,
      requiredPoints: 25,
      type: 'proc',
      effects: [{ type: 'proc', procChance: 20, procTrigger: 'pet_crit', procEffect: 'attack_speed', valuePerRank: 20 }],
    },
    // Tier 7 - Capstone
    {
      id: 'bestial_wrath_talent',
      name: 'Bestial Wrath',
      description: 'Send your pet into a rage, increasing damage by 50% and immunity to CC for 18 seconds.',
      tier: 7,
      column: 2,
      maxRanks: 1,
      requiredPoints: 30,
      type: 'active',
      effects: [{ type: 'ability_unlock', abilityId: 'bestial_wrath', valuePerRank: 1 }],
    },
  ],
};

const marksmanshipTalentTree: TalentTreeDefinition = {
  id: 'marksmanship',
  name: 'Marksmanship',
  description: 'Focuses on ranged weapon damage and special shots.',
  role: 'dps',
  talents: [
    // Tier 1
    {
      id: 'improved_concussive_shot',
      name: 'Improved Concussive Shot',
      description: 'Gives your Concussive Shot a 4/8/12/16/20% chance to stun the target for 3 seconds.',
      tier: 1,
      column: 1,
      maxRanks: 5,
      requiredPoints: 0,
      type: 'proc',
      effects: [{ type: 'proc', procChance: 4, procTrigger: 'concussive_shot', procEffect: 'stun', valuePerRank: 4 }],
    },
    {
      id: 'efficiency',
      name: 'Efficiency',
      description: 'Reduces the mana cost of your Shots and Stings by 2/4/6/8/10%.',
      tier: 1,
      column: 2,
      maxRanks: 5,
      requiredPoints: 0,
      type: 'passive',
      effects: [{ type: 'stat_bonus', stat: 'shotManaCost', valuePerRank: -2, isPercentage: true }],
    },
    {
      id: 'lethal_shots',
      name: 'Lethal Shots',
      description: 'Increases your critical strike chance with ranged weapons by 1/2/3/4/5%.',
      tier: 1,
      column: 3,
      maxRanks: 5,
      requiredPoints: 0,
      type: 'passive',
      effects: [{ type: 'stat_bonus', stat: 'rangedCritChance', valuePerRank: 1, isPercentage: true }],
    },
    // Tier 2
    {
      id: 'aimed_shot_talent',
      name: 'Aimed Shot',
      description: 'An aimed shot that increases ranged damage by 600 and reduces healing done to target.',
      tier: 2,
      column: 2,
      maxRanks: 1,
      requiredPoints: 5,
      type: 'active',
      effects: [{ type: 'ability_unlock', abilityId: 'aimed_shot', valuePerRank: 1 }],
    },
    {
      id: 'improved_hunters_mark',
      name: "Improved Hunter's Mark",
      description: "Increases the ranged attack power bonus of your Hunter's Mark by 20/40/60/80/100%.",
      tier: 2,
      column: 3,
      maxRanks: 5,
      requiredPoints: 5,
      type: 'passive',
      effects: [{ type: 'ability_modifier', abilityId: 'hunters_mark', stat: 'attackPower', valuePerRank: 20, isPercentage: true }],
    },
    // Tier 3
    {
      id: 'mortal_shots',
      name: 'Mortal Shots',
      description: 'Increases your ranged weapon critical strike damage bonus by 6/12/18/24/30%.',
      tier: 3,
      column: 2,
      maxRanks: 5,
      requiredPoints: 10,
      type: 'passive',
      effects: [{ type: 'stat_bonus', stat: 'rangedCritDamage', valuePerRank: 6, isPercentage: true }],
    },
    // Tier 4
    {
      id: 'go_for_the_throat',
      name: 'Go for the Throat',
      description: 'Your ranged critical hits cause your pet to gain 25/50 Focus.',
      tier: 4,
      column: 1,
      maxRanks: 2,
      requiredPoints: 15,
      type: 'proc',
      effects: [{ type: 'proc', procChance: 100, procTrigger: 'ranged_crit', procEffect: 'pet_focus', valuePerRank: 25 }],
    },
    {
      id: 'scatter_shot',
      name: 'Scatter Shot',
      description: 'A short-range shot that deals 50% weapon damage and disorients the target for 4 seconds.',
      tier: 4,
      column: 2,
      maxRanks: 1,
      requiredPoints: 15,
      type: 'active',
      effects: [{ type: 'ability_unlock', abilityId: 'scatter_shot', valuePerRank: 1 }],
    },
    {
      id: 'barrage',
      name: 'Barrage',
      description: 'Increases the damage done by your Multi-Shot and Volley spells by 4/8/12%.',
      tier: 4,
      column: 3,
      maxRanks: 3,
      requiredPoints: 15,
      type: 'passive',
      effects: [{ type: 'ability_modifier', abilityId: 'multi_shot', stat: 'damage', valuePerRank: 4, isPercentage: true }],
    },
    // Tier 5
    {
      id: 'ranged_weapon_specialization',
      name: 'Ranged Weapon Specialization',
      description: 'Increases the damage done by ranged weapons by 1/2/3/4/5%.',
      tier: 5,
      column: 2,
      maxRanks: 5,
      requiredPoints: 20,
      type: 'passive',
      effects: [{ type: 'stat_bonus', stat: 'rangedDamage', valuePerRank: 1, isPercentage: true }],
    },
    // Tier 7 - Capstone
    {
      id: 'trueshot_aura_talent',
      name: 'Trueshot Aura',
      description: 'Increases the attack power of party members within 45 yards by 100.',
      tier: 7,
      column: 2,
      maxRanks: 1,
      requiredPoints: 30,
      type: 'active',
      effects: [{ type: 'ability_unlock', abilityId: 'trueshot_aura', valuePerRank: 1 }],
    },
  ],
};

const survivalTalentTree: TalentTreeDefinition = {
  id: 'survival',
  name: 'Survival',
  description: 'Focuses on traps, utility, and melee backup abilities.',
  role: 'dps',
  talents: [
    // Tier 1
    {
      id: 'monster_slaying',
      name: 'Monster Slaying',
      description: 'Increases all damage and critical damage against Beasts, Giants, and Dragonkin by 1/2/3%.',
      tier: 1,
      column: 1,
      maxRanks: 3,
      requiredPoints: 0,
      type: 'passive',
      effects: [{ type: 'stat_bonus', stat: 'monsterDamage', valuePerRank: 1, isPercentage: true }],
    },
    {
      id: 'humanoid_slaying',
      name: 'Humanoid Slaying',
      description: 'Increases all damage and critical damage against Humanoids by 1/2/3%.',
      tier: 1,
      column: 2,
      maxRanks: 3,
      requiredPoints: 0,
      type: 'passive',
      effects: [{ type: 'stat_bonus', stat: 'humanoidDamage', valuePerRank: 1, isPercentage: true }],
    },
    {
      id: 'entrapment',
      name: 'Entrapment',
      description: 'Gives your Immolation Trap and Explosive Trap a 5/10/15/20/25% chance to entrap the target.',
      tier: 1,
      column: 3,
      maxRanks: 5,
      requiredPoints: 0,
      type: 'proc',
      effects: [{ type: 'proc', procChance: 5, procTrigger: 'trap_trigger', procEffect: 'root', valuePerRank: 5 }],
    },
    // Tier 2
    {
      id: 'deflection',
      name: 'Deflection',
      description: 'Increases your Parry chance by 1/2/3/4/5%.',
      tier: 2,
      column: 1,
      maxRanks: 5,
      requiredPoints: 5,
      type: 'passive',
      effects: [{ type: 'stat_bonus', stat: 'parryChance', valuePerRank: 1, isPercentage: true }],
    },
    {
      id: 'savage_strikes',
      name: 'Savage Strikes',
      description: 'Increases the critical strike chance of Raptor Strike and Mongoose Bite by 10/20%.',
      tier: 2,
      column: 2,
      maxRanks: 2,
      requiredPoints: 5,
      type: 'passive',
      effects: [{ type: 'ability_modifier', abilityId: 'raptor_strike', stat: 'critChance', valuePerRank: 10 }],
    },
    {
      id: 'improved_wing_clip',
      name: 'Improved Wing Clip',
      description: 'Gives your Wing Clip ability a 7/14/20% chance to immobilize the target for 5 seconds.',
      tier: 2,
      column: 3,
      maxRanks: 3,
      requiredPoints: 5,
      type: 'proc',
      effects: [{ type: 'proc', procChance: 7, procTrigger: 'wing_clip', procEffect: 'immobilize', valuePerRank: 7 }],
    },
    // Tier 3
    {
      id: 'clever_traps',
      name: 'Clever Traps',
      description: 'Increases the duration of Freezing Trap and Frost Trap by 15/30% and the damage of Immolation Trap and Explosive Trap by 15/30%.',
      tier: 3,
      column: 1,
      maxRanks: 2,
      requiredPoints: 10,
      type: 'passive',
      effects: [{ type: 'ability_modifier', abilityId: 'freezing_trap', stat: 'duration', valuePerRank: 15, isPercentage: true }],
    },
    {
      id: 'survivalist',
      name: 'Survivalist',
      description: 'Increases total health by 2/4/6/8/10%.',
      tier: 3,
      column: 2,
      maxRanks: 5,
      requiredPoints: 10,
      type: 'passive',
      effects: [{ type: 'stat_bonus', stat: 'health', valuePerRank: 2, isPercentage: true }],
    },
    {
      id: 'deterrence',
      name: 'Deterrence',
      description: 'When activated, increases your Parry chance by 25% and your chance to resist spells by 25% for 10 seconds.',
      tier: 3,
      column: 3,
      maxRanks: 1,
      requiredPoints: 10,
      type: 'active',
      effects: [{ type: 'ability_unlock', abilityId: 'deterrence', valuePerRank: 1 }],
    },
    // Tier 4
    {
      id: 'trap_mastery',
      name: 'Trap Mastery',
      description: 'Decreases the chance enemies will resist trap effects by 5/10%.',
      tier: 4,
      column: 1,
      maxRanks: 2,
      requiredPoints: 15,
      type: 'passive',
      effects: [{ type: 'stat_bonus', stat: 'trapResistReduction', valuePerRank: 5, isPercentage: true }],
    },
    {
      id: 'surefooted',
      name: 'Surefooted',
      description: 'Increases your hit chance by 1/2/3% and your chance to resist movement impairing effects by 5/10/15%.',
      tier: 4,
      column: 2,
      maxRanks: 3,
      requiredPoints: 15,
      type: 'passive',
      effects: [
        { type: 'stat_bonus', stat: 'hitChance', valuePerRank: 1, isPercentage: true },
        { type: 'stat_bonus', stat: 'moveImpairedResist', valuePerRank: 5, isPercentage: true },
      ],
    },
    // Tier 5
    {
      id: 'killer_instinct',
      name: 'Killer Instinct',
      description: 'Increases your critical strike chance with all attacks by 1/2/3%.',
      tier: 5,
      column: 2,
      maxRanks: 3,
      requiredPoints: 20,
      type: 'passive',
      effects: [{ type: 'stat_bonus', stat: 'critChance', valuePerRank: 1, isPercentage: true }],
    },
    {
      id: 'lightning_reflexes',
      name: 'Lightning Reflexes',
      description: 'Increases your Agility by 3/6/9/12/15%.',
      tier: 5,
      column: 3,
      maxRanks: 5,
      requiredPoints: 20,
      type: 'passive',
      effects: [{ type: 'stat_bonus', stat: 'agility', valuePerRank: 3, isPercentage: true }],
    },
    // Tier 7 - Capstone
    {
      id: 'wyvern_sting_talent',
      name: 'Wyvern Sting',
      description: 'A stinging shot that puts the target to sleep for 12 seconds.',
      tier: 7,
      column: 2,
      maxRanks: 1,
      requiredPoints: 30,
      type: 'active',
      effects: [{ type: 'ability_unlock', abilityId: 'wyvern_sting', valuePerRank: 1 }],
    },
  ],
};

// ============= HUNTER CLASS DEFINITION =============

export const hunterClass: ClassDefinition = {
  id: 'hunter',
  name: 'Hunter',
  description: 'Masters of ranged combat who fight alongside loyal animal companions. They excel at dealing sustained damage from a distance while their pets hold enemy attention.',
  resourceType: 'mana',
  armorType: 'mail',

  baseStats: {
    health: 80,
    resource: 145, // Starting mana (GDD: 145)
    strength: 10,
    agility: 22,
    intellect: 13, // GDD: 13
    stamina: 13,   // GDD: 13
    spirit: 11,
  },

  statScaling: {
    strengthToAP: 1.0,           // 1 STR = 1 melee AP
    agilityToAP: 1.0,            // 1 AGI = 1 melee AP
    agilityToCrit: 0.053,        // 1 AGI = 0.053% crit (53 AGI = 1%)
    agilityToRangedAP: 2.0,      // 1 AGI = 2 ranged AP
    intellectToMana: 15,         // 1 INT = 15 mana
    intellectToSpellPower: 0,    // No spell power scaling
    intellectToSpellCrit: 0,     // No spell crit
    staminaToHealth: 10,
    spiritToRegen: 0.5,          // Lower spirit scaling
  },

  talentTrees: [beastMasteryTalentTree, marksmanshipTalentTree, survivalTalentTree],
  abilities: hunterAbilities,
};

export default hunterClass;
